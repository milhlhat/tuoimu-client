import{j as e,H as y,W as g,a3 as P,aL as v,aM as b,N as C,K as I,r as c,X as w,n as j,aR as k,U as O,a6 as A,aJ as L,Y as W}from"./index-ASk09GZ2.js";import{m as B,p as T}from"./styles-y3Fvr__R.js";import"./styles-4EePiWDc.js";import"./image-RUVbjMva.js";import"./text-max-line-yV5277t_.js";import"./styles-k-Yqk2xs.js";import{S as F,u as R,o as f}from"./search-not-found-Lj89ajIW.js";import{u as E,a as H,P as M}from"./post-list-UNhWuW9l.js";import{u as U,C as K}from"./use-popover-qsucSTt8.js";import{M as N}from"./_baseIteratee-MEQ8zlFq.js";import{A as Q}from"./Autocomplete-dtkS1NBR.js";import{A as V}from"./format-number-XjJYQeDj.js";import"./use-responsive-sI87qnVA.js";import"./format-time-KCC1KQvG.js";import"./CardContent-xugEAFNm.js";import"./Grid2-dVSk-kd4.js";import"./Chip-2CnsXwZG.js";const _=[{value:"latest",label:"Latest"},{value:"popular",label:"Popular"},{value:"oldest",label:"Oldest"}];function z({sort:s,sortOptions:r,onSort:l}){const n=U();return e.jsxs(e.Fragment,{children:[e.jsxs(y,{disableRipple:!0,color:"inherit",onClick:n.onOpen,endIcon:e.jsx(g,{icon:n.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold",textTransform:"capitalize"},children:["Sort By:",e.jsx(P,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:s})]}),e.jsx(K,{open:n.open,onClose:n.onClose,sx:{width:140},children:r.map(a=>e.jsx(N,{selected:s===a.value,onClick:()=>{n.onClose(),l(a.value)},children:a.label},a.value))})]})}function G({query:s,results:r,onSearch:l,hrefItem:n,loading:a}){const d=v(),p=t=>{d.push(n(t))},u=t=>{s&&t.key==="Enter"&&p(s)};return e.jsx(Q,{sx:{width:{xs:1,sm:260}},loading:a,autoHighlight:!0,popupIcon:null,options:r,onInputChange:(t,o)=>l(o),getOptionLabel:t=>t.title,noOptionsText:e.jsx(F,{query:s,sx:{bgcolor:"unset"}}),isOptionEqualToValue:(t,o)=>t.id===o.id,slotProps:{popper:{placement:"bottom-start",sx:{minWidth:320}},paper:{sx:{[` .${b.option}`]:{pl:.75}}}},renderInput:t=>e.jsx(C,{...t,placeholder:"Search...",onKeyUp:u,InputProps:{...t.InputProps,startAdornment:e.jsx(I,{position:"start",children:e.jsx(g,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:e.jsxs(e.Fragment,{children:[a?e.jsx(g,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,t.InputProps.endAdornment]})}}),renderOption:(t,o,{inputValue:m})=>{const h=B(o.title,m),x=T(o.title,h);return c.createElement("li",{...t,key:o.id},e.jsx(V,{alt:o.title,src:o.coverUrl,variant:"rounded",sx:{width:48,height:48,flexShrink:0,mr:1.5,borderRadius:1}},o.id),e.jsx(w,{underline:"none",onClick:()=>p(o.title),children:x.map((i,S)=>e.jsx(j,{component:"span",color:i.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:i.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:i.text},S))},m))}})}function J(){const s=k(),[r,l]=c.useState("latest"),[n,a]=c.useState(""),d=R(n),{posts:p,postsLoading:u}=E(),{searchResults:t,searchLoading:o}=H(d),m=X({inputData:p,sortBy:r}),h=c.useCallback(i=>{l(i)},[]),x=c.useCallback(i=>{a(i)},[]);return e.jsxs(O,{maxWidth:s.themeStretch?!1:"lg",children:[e.jsx(j,{variant:"h4",sx:{my:{xs:3,md:5}},children:"Blog"}),e.jsxs(A,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},sx:{mb:{xs:3,md:5}},children:[e.jsx(G,{query:d,results:t,onSearch:x,loading:o,hrefItem:i=>L.post.details(i)}),e.jsx(z,{sort:r,onSort:h,sortOptions:_})]}),e.jsx(M,{posts:m,loading:u})]})}const X=({inputData:s,sortBy:r})=>r==="latest"?f(s,["createdAt"],["desc"]):r==="oldest"?f(s,["createdAt"],["asc"]):r==="popular"?f(s,["totalViews"],["desc"]):s;function me(){return e.jsxs(e.Fragment,{children:[e.jsx(W,{children:e.jsx("title",{children:" Post: List"})}),e.jsx(J,{})]})}export{me as default};
